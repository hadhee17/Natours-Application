parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"eqli":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.displayMap=void 0;const o=o=>{var t=L.map("map",{zoomControl:!1});L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',crossOrigin:""}).addTo(t);const e=[];o.forEach(o=>{e.push([o.coordinates[1],o.coordinates[0]]),L.marker([o.coordinates[1],o.coordinates[0]]).addTo(t).bindPopup(`<p>Day ${o.day}: ${o.description}</p>`,{autoClose:!1}).openPopup()});const p=L.latLngBounds(e).pad(.5);t.fitBounds(p),t.scrollWheelZoom.disable()};exports.displayMap=o;
},{}],"acK6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.showAlert=exports.hideAlert=void 0;const e=()=>{const e=document.querySelector(".alert");e&&e.parentElement.removeChild(e)};exports.hideAlert=e;const t=(t,r)=>{e();const o=`<div class="alert alert--${t}">${r}</div>`;document.querySelector("body").insertAdjacentHTML("afterbegin",o),window.setTimeout(e,5e3)};exports.showAlert=t;
},{}],"mnjM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.logout=exports.login=void 0;var o=require("./alert");const s=async(s,e)=>{try{"Success"===(await axios({method:"POST",url:`${API_URL}/login`,data:{email:s,password:e}})).data.status&&((0,o.showAlert)("success","Logged in successfully!"),window.setTimeout(()=>{location.assign("/")},1500))}catch(r){r.response&&r.response.data?(0,o.showAlert)("error",r.response.data.message):(0,o.showAlert)("error","Error logging in. Please try again.")}};exports.login=s;const e=async()=>{try{"success"===(await axios({method:"GET",url:`${API_URL}/logout`})).data.status&&location.reload(!0)}catch(s){(0,o.showAlert)("error","Error logging out! Try again.")}};exports.logout=e;
},{"./alert":"acK6"}],"FxPS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.updateSettings=void 0;var e=require("./alert");const s=async(s,t)=>{try{const r="password"===t?"http://127.0.0.1:3000/api/v1/users/updateMyPassword":"http://127.0.0.1:3000/api/v1/users/updateMe";"Success"===(await axios({method:"PATCH",url:r,data:s})).data.status&&(0,e.showAlert)("success",`${t.toUpperCase()} updated successfully!`)}catch(a){(0,e.showAlert)("error",a.response.data.message)}};exports.updateSettings=s;
},{"./alert":"acK6"}],"Focm":[function(require,module,exports) {
"use strict";var e=require("./mapBox"),t=require("./login"),n=require("./updateSettings");const a=document.getElementById("map"),o=document.querySelector(".form--login"),d=document.querySelector(".nav__el--logout"),r=document.querySelector(".form-user-data"),s=document.querySelector(".form-user-password");if(a){const t=JSON.parse(a.dataset.locations);(0,e.displayMap)(t)}o&&o.addEventListener("submit",async e=>{e.preventDefault();const n=document.getElementById("email").value,a=document.getElementById("password").value;await(0,t.login)(n,a)}),d&&d.addEventListener("click",t.logout),r&&r.addEventListener("submit",e=>{e.preventDefault();const t=new FormData;t.append("name",document.getElementById("name").value),t.append("email",document.getElementById("email").value),t.append("photo",document.getElementById("photo").files[0]),(0,n.updateSettings)(t,"data")}),s&&s.addEventListener("submit",async e=>{e.preventDefault(),document.querySelector(".btn--save-password").textContent="Updating...";const t=document.getElementById("password-current").value,a=document.getElementById("password").value,o=document.getElementById("password-confirm").value;await(0,n.updateSettings)({currentPassword:t,password:a,passwordConfirm:o},"password"),document.querySelector(".btn--save-password").textContent="Save password",document.getElementById("password-current").value="",document.getElementById("password").value="",document.getElementById("password-confirm").value=""});
},{"./mapBox":"eqli","./login":"mnjM","./updateSettings":"FxPS"}]},{},["Focm"], null)
//# sourceMappingURL=/bundle.js.map